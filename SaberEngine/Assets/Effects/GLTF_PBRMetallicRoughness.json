{
	"Effect": {
		"Name": "GLTF_PBRMetallicRoughness",

		"DrawStyles": [
			{
				"Conditions": [
					{ "Rule": "GBuffer", "Mode": "Fill" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "FillGBuffer_SingleSided"
			},
			{
				"Conditions": [
					{ "Rule": "GBuffer", "Mode": "Fill" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Mask" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "FillGBuffer_SingleSided"
			},
			{
				"Conditions": [
					{ "Rule": "GBuffer", "Mode": "Fill" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "FillGBuffer_DoubleSided"
			},
			{
				"Conditions": [
					{ "Rule": "GBuffer", "Mode": "Fill" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Mask" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "FillGBuffer_DoubleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "2D" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "Shadow_2D_SingleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "2D" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Mask" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "Shadow_2D_SingleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "2D" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "Shadow_2D_DoubleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "2D" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Mask" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "Shadow_2D_DoubleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "Cube" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "Shadow_Cube_SingleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "Cube" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Mask" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "Shadow_Cube_SingleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "Cube" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "Shadow_Cube_DoubleSided"
			},
			{
				"Conditions": [
					{ "Rule": "Shadow", "Mode": "Cube" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Mask" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "Shadow_Cube_DoubleSided"
			}
		]
	},

	"PipelineStates": [
		{
			"Name": "SingleSided",
			"FaceCullingMode": "Back",
			"DepthTestMode": "Less"
		},
		{
			"Name": "DoubleSided",
			"FaceCullingMode": "Disabled",
			"DepthTestMode": "Less"
		}
	],

	"Techniques": [
		{
			"Name": "FillGBuffer_SingleSided",
			"VShader": "GBuffer_VShader",
			"PShader": "GBuffer_PShader",
			"PipelineState": "SingleSided"
		},
		{
			"Name": "FillGBuffer_DoubleSided",
			"VShader": "GBuffer_VShader",
			"PShader": "GBuffer_PShader",
			"PipelineState": "DoubleSided"
		},
		{
			"Name": "Shadow_2D_SingleSided",
			"VShader": "Depth_VShader",
			"PipelineState": "SingleSided"
			// TODO: FaceCullingMode::Disabled is better for minimizing peter-panning, but we need backface culling if we
			// want to be able to place lights inside of geometry (eg. emissive spheres). For now, enable backface culling.
			// In future, we need to support tagging assets to not cast shadows at load time
		},
		{
			"Name": "Shadow_2D_DoubleSided",
			"VShader": "Depth_VShader",
			"PipelineState": "DoubleSided"
		},
		{
			"Name": "Shadow_Cube_SingleSided",
			"VShader": "CubeDepth_VShader",
			"GShader": "CubeDepth_GShader",
			"PipelineState": "SingleSided"
		},
		{
			"Name": "Shadow_Cube_DoubleSided",
			"VShader": "CubeDepth_VShader",
			"GShader": "CubeDepth_GShader",
			"PipelineState": "DoubleSided"
		}
	]
}