{
	"Effect" : {
		"Name" :  "RayTracing",
		"ExcludedPlatforms": [ "OpenGL" ],
		"Parents" : [],
		"DrawStyles" :  [
			// Hit groups:
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Geometry" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "RT_Experimental_HitGroup_OpaqueSingleSided"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Geometry" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Clip" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "RT_Experimental_HitGroup_ClipSingleSided"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Geometry" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Opaque" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "RT_Experimental_HitGroup_OpaqueDoubleSided"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Geometry" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Clip" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "RT_Experimental_HitGroup_ClipDoubleSided"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Geometry" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Blend" },
					{ "Rule": "MaterialSidedness", "Mode": "Single" }
				],
				"Technique": "RT_Experimental_HitGroup_BlendSingleSided"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Geometry" },
					{ "Rule": "MaterialAlphaMode", "Mode": "Blend" },
					{ "Rule": "MaterialSidedness", "Mode": "Double" }
				],
				"Technique": "RT_Experimental_HitGroup_BlendDoubleSided"
			},

			// Ray gen:
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_RayGen_A" }
				],
				"Technique": "RT_Experimental_RayGen_A"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_RayGen_B" }
				],
				"Technique": "RT_Experimental_RayGen_B"
			},

			// Miss:
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Miss_Blue" }
				],
				"Technique": "RT_Experimental_Miss_Blue"
			},
			{
				"Conditions": [
					{ "Rule" : "RT_Experimental", "Mode" : "RT_Experimental_Miss_Red" }
				],
				"Technique": "RT_Experimental_Miss_Red"
			}

			// Callable:
			// TODO...

		],
		"Techniques" :  [
			// Hit groups:
			// Note: For hit groups, we use the Technique name as the hit group name
			{
				"Name": "RT_Experimental_HitGroup_OpaqueSingleSided",

				"ClosestHitShader": "RayTracing_Experimental",
				"ClosestHitShaderEntryPoint" : "ClosestHit_Experimental",
				"ClosestHitShaderDefines": ["OPAQUE_SINGLE_SIDED"]
			},
			{
				"Name": "RT_Experimental_HitGroup_ClipSingleSided",

				"AnyHitShader": "RayTracing_Experimental",
				"AnyHitShaderEntryPoint" : "AnyHit_Experimental",
				"AnyHitShaderDefines": ["CLIP_SINGLE_SIDED"],

				"ClosestHitShader": "RayTracing_Experimental",
				"ClosestHitShaderEntryPoint" : "ClosestHit_Experimental",
				"ClosestHitShaderDefines": ["CLIP_SINGLE_SIDED"]
			},
			{
				"Name": "RT_Experimental_HitGroup_OpaqueDoubleSided",

				"ClosestHitShader": "RayTracing_Experimental",
				"ClosestHitShaderEntryPoint" : "ClosestHit_Experimental",
				"ClosestHitShaderDefines": ["OPAQUE_DOUBLE_SIDED"]
			},
			{
				"Name": "RT_Experimental_HitGroup_ClipDoubleSided",

				"AnyHitShader": "RayTracing_Experimental",
				"AnyHitShaderEntryPoint" : "AnyHit_Experimental",
				"AnyHitShaderDefines": ["CLIP_DOUBLE_SIDED"],

				"ClosestHitShader": "RayTracing_Experimental",
				"ClosestHitShaderEntryPoint" : "ClosestHit_Experimental",
				"ClosestHitShaderDefines": ["CLIP_DOUBLE_SIDED"]
			},
			{
				"Name": "RT_Experimental_HitGroup_BlendSingleSided",

				"AnyHitShader": "RayTracing_Experimental",
				"AnyHitShaderEntryPoint" : "AnyHit_Experimental",
				"AnyHitShaderDefines": ["BLEND_SINGLE_SIDED"],

				"ClosestHitShader": "RayTracing_Experimental",
				"ClosestHitShaderEntryPoint" : "ClosestHit_Experimental",
				"ClosestHitShaderDefines": ["BLEND_SINGLE_SIDED"]
			},
			{
				"Name": "RT_Experimental_HitGroup_BlendDoubleSided",

				"AnyHitShader": "RayTracing_Experimental",
				"AnyHitShaderEntryPoint" : "AnyHit_Experimental",
				"AnyHitShaderDefines": ["BLEND_DOUBLE_SIDED"],

				"ClosestHitShader": "RayTracing_Experimental",
				"ClosestHitShaderEntryPoint" : "ClosestHit_Experimental",
				"ClosestHitShaderDefines": ["BLEND_DOUBLE_SIDED"]
			},


			// Ray gen:
			{
				"Name": "RT_Experimental_RayGen_A",
				"RayGenerationShader": "RayTracing_Experimental",
				"RayGenerationShaderEntryPoint": "RayGeneration_Experimental",
				"RayGenerationShaderDefines": ["RAY_GEN_A"]
			},
			{
				"Name": "RT_Experimental_RayGen_B",
				"RayGenerationShader": "RayTracing_Experimental",
				"RayGenerationShaderEntryPoint": "RayGeneration_Experimental",
				"RayGenerationShaderDefines": ["RAY_GEN_B"]
			},

			// Miss:
			{
				"Name": "RT_Experimental_Miss_Blue",
				"MissShader": "RayTracing_Experimental",
				"MissShaderEntryPoint": "Miss_Experimental",
				"MissShaderDefines": ["MISS_BLUE"]
			},
			{
				"Name": "RT_Experimental_Miss_Red",
				"MissShader": "RayTracing_Experimental",
				"MissShaderEntryPoint": "Miss_Experimental",
				"MissShaderDefines": ["MISS_RED"]
			},

			// Callable:
			{
				"Name": "RT_Experimental_Callable",
				"CallableShader": "RayTracing_Experimental",
				"CallableShaderEntryPoint": "Callable_Experimental",
				"CallableShaderDefines": []
			}
		]
	}
}
