{
	"Effect": {
		"Name": "DeferredLighting",
		"Parents": ["Common"],
		"DrawStyles": [
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "BRDFIntegration" }
				],
				"Technique": "BRDFIntegration"
			},
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "IEMGeneration" }
				],
				"Technique": "IEMGeneration"
			},
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "PMREMGeneration" }
				],
				"Technique": "PMREMGeneration"
			},
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "DeferredAmbient" }
				],
				"Technique": "DeferredAmbient"
			},
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "DeferredDirectional" }
				],
				"Technique": "DeferredDirectional"
			},
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "DeferredPoint" }
				],
				"Technique": "DeferredPoint"
			},
			{
				"Conditions": [
					{ "Rule": "DeferredLighting", "Mode": "DeferredSpot" }
				],
				"Technique": "DeferredSpot"
			}
		],

		"Techniques": [
			{
				"Name": "BRDFIntegration",
				"CShader": "GenerateBRDFIntegrationMap_CShader",
				"CShaderEntryPoint" :  "CShader"
			},
			{
				"Name": "IEMGeneration",
				"VShader": "GenerateIBL_VShader",
				"VShaderEntryPoint": "VShader",
				"PShader": "GenerateIEM_PShader",
				"PShaderEntryPoint": "PShader",
				"RasterizationState": "IBLGeneration",
				"VertexStream": "PositionOnly"
			},
			{
				"Name": "PMREMGeneration",
				"VShader": "GenerateIBL_VShader",
				"VShaderEntryPoint": "VShader",
				"PShader": "GeneratePMREM_PShader",
				"PShaderEntryPoint": "PShader",
				"RasterizationState": "IBLGeneration",
				"VertexStream": "PositionOnly"
			},
			{
				"Name": "DeferredAmbient",
				"VShader": "FullscreenQuad_VShader",
				"VShaderEntryPoint": "VShader",
				"PShader": "DeferredAmbientLight_PShader",
				"PShaderEntryPoint": "PShader",
				"RasterizationState": "DeferredFullscreenQuad",
				"VertexStream": "PositionUV"
			},
			{
				"Name": "DeferredDirectional",
				"VShader": "FullscreenQuad_VShader",
				"VShaderEntryPoint": "VShader",
				"PShader": "DeferredDirectionalLight_PShader",
				"PShaderEntryPoint": "PShader",
				"RasterizationState": "DeferredFullscreenQuad",
				"VertexStream": "PositionUV"
			},
			{
				"Name": "DeferredPoint",
				"VShader": "DeferredPointSpot_VShader",
				"VShaderEntryPoint": "VShader",
				"PShader": "DeferredPointLight_PShader",
				"PShaderEntryPoint": "PShader",
				"RasterizationState": "DeferredMesh",
				"VertexStream": "PositionOnly"
			},
			{
				"Name": "DeferredSpot",
				"VShader": "DeferredPointSpot_VShader",
				"VShaderEntryPoint": "VShader",
				"PShader": "DeferredSpotLight_PShader",
				"PShaderEntryPoint": "PShader",
				"RasterizationState": "DeferredMesh",
				"VertexStream": "PositionOnly"
			}
		]
	},

	"RasterizationStates": [
		{
			"Name": "IBLGeneration",
			"RasterizerState" : {
				"FaceCullingMode": "Disabled"
			},
			"DepthStencilState" : {
				"DepthTestEnabled": false,
				"DepthComparison":  "Always",
				"DepthWriteMask": "Zero"
			}
		},
		{
			"Name": "DeferredFullscreenQuad",
			"RasterizerState" : {
				"FaceCullingMode": "Back"
			},
			"DepthStencilState" : {
				"DepthComparison":  "Greater",
				"DepthWriteMask": "Zero"
			},
			"BlendState" : {
				"RenderTargets": [
					{
						"BlendEnable" : true,
						"SrcBlend" : "One",
						"DstBlend" : "One",
						"BlendOp": "Add"
					}
				]
			}
		},
		{
			"Name": "DeferredMesh",
			"RasterizerState" : {
				"FaceCullingMode": "Front"
			},
			"DepthStencilState" : {
				"DepthComparison":  "GEqual",
				"DepthWriteMask": "Zero"
			},
			"BlendState" : {
				"RenderTargets": [
					{
						"BlendEnable" : true,
						"SrcBlend" : "One",
						"DstBlend" : "One",
						"BlendOp": "Add"
					}
				]
			}
		}
	]
}